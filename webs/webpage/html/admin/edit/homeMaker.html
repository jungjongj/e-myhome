<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>홈페이지 메이커</title>

    <link rel="stylesheet" href="/aMvc/lib/bootstrap/bootstrap-4.6.1-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/aMvc/lib/css/font-awesome.min.css">
    <link rel="stylesheet" href="/aMvc/lib/summernote-0.8.18-dist/summernote-lite.min.css">
    <link rel="stylesheet" href="/aMvc/lib/css/da-style.css?s=31">
    <link rel="stylesheet" href="/aMvc/lib/zTree_v3-master/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <link rel="stylesheet" href="/aMvc/lib/orgchart/dist/css/jquery.orgchart.min.css" type="text/css">

    <script src="/aMvc/lib/jquery/jquery-2.1.2.min.js"></script>
    <script src="/aMvc/lib/jquery/jquery-ui.min.js"></script>
    <script src="/aMvc/lib/bootstrap/bootstrap-4.6.1-dist/js/bootstrap.bundle.min.js"></script>
    <script src="/aMvc/lib/bootstrap/bootstrap-4.6.1-dist/js/bootstrap.min.js"></script>
    <script src="/aMvc/lib/summernote-0.8.18-dist/summernote-lite.min.js"></script>

    <script src="/aMvc/lib/js/da-globallib.js?123"></script>

    <script src="/aMvc/base/boardAjaxBase.js?69"></script>
    <script src="/aMvc/base/dbFileAjaxBase.js?69"></script>
    <script src="/aMvc/base/viewLibBase.js?12"></script>
    <script src="/aMvc/base/templateBase.js?12"></script>
    <script src="/aMvc/base/layoutBase.js?69"></script>

    <script src="/aMvc/lib/Fabric/Fabric.4.6.0/js/fabric.min.js"></script>
    <script src="/aMvc/lib/js/da-paint-controller.js?23"></script>
    <script type="text/javascript" src="/aMvc/lib/zTree_v3-master/js/jquery.ztree.all.min.js"></script>
    <script type="text/javascript" src="/aMvc/lib/orgchart/dist/js/jquery.orgchart.js"></script>
    <script src="/aMvc/lib/moment/moment.js"></script>

    <script type="text/javascript">

        var _dbpath, _code;
        var homeM = null;
        var newWindow;

        var openNewWindow = function (target) {

            newWindow = window.open(target, "OpenToolWindow", "height=800, width=600, scrollbars=yes, resizable=yes");
            newWindow.focus();
            //newWindow.receiveWindow('start');
            //$('#' + target).empty();

        }

        function popupFileMenuClick() {

            $$('popup-file-menu-Btn').onclick = function (e) {

                //e.defaultPrevented();
                e.stopPropagation();
                if ($('#filepopupmenu').is(':visible'))
                    return $("#filepopupmenu").css('display', 'none');
                var p = __setPopupMenuPostion(e, $("#filepopupmenu"));
                $("#filepopupmenu").css({ left: p.x, top: p.y, display: 'block' });
            };

            $$('select-db-btn').onclick = function () {
                homeM.selectDb();

            };

            $$('save-file-btn').onclick = function () {
                homeM.saveFile();
            };

            $$('save-db-btn').onclick = function () {
                homeM.saveDb();
            };

            $$('open-file-btn').onclick = function () {

                homeM.openFile();
            };

            $$('open-db-btn').onclick = function () {

                homeM.openDb();
            };

        }

        $(document).ready(function () {
            $(document.body).click(function (e) {

                if ($('#filepopupmenu').is(':visible')) {
                    $("#filepopupmenu").css('display', 'none');
                }
                return;
            })
            popupFileMenuClick();

            var elem = document.getElementById('homemaker');
            homeM = new HomepageMaker({ elem: elem });

        });


    </script>
</head>
<body id="test">
    <da include="/html/module/navbarAdmin.html"></da>

    <nav class="navbar navbar-expand-sm navbar-light py-0 py-md-0" style="background-color: #e3f2fd; border: 1px solid">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav mr-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                    <li class="nav-item">
                        <a class="nav-link" id="popup-file-menu-Btn" href="#">파일</a>
                    </li>
                    <li class="nav-item">
                        <button class="btn btn-outline-success" type="submit" id="select-db-btn">디비선택</button>
                    </li>
                </ul>
                
            </div>
        </div>
    </nav>

    <div id="homemaker"></div>

    <da include="/html/module/footer.html"></da>

    <div class="btn-group-vertical" id="filepopupmenu" style="width: 18rem; z-index: 1111113; position: absolute; display: none">

        <button type="button" class="btn btn-primary" id="open-file-btn">파일열기</button>
        <button type="button" class="btn btn-primary" id="save-file-btn">파일저장</button>
        <button type="button" class="btn btn-primary" id="open-db-btn">디비열기</button>
        <button type="button" class="btn btn-primary" id="save-db-btn">디비저장</button>
    </div>
</body>
</html>