<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test Mvc</title>

    <link rel="stylesheet" href="/aMvc/lib/bootstrap/bootstrap-4.6.1-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/aMvc/lib/css/font-awesome.min.css">
    <link rel="stylesheet" href="/aMvc/lib/summernote-0.8.18-dist/summernote-lite.min.css">
    <link rel="stylesheet" href="/aMvc/lib/css/da-style.css?s=31">

    <script src="/aMvc/lib/jquery/jquery-2.1.2.min.js"></script>
    <script src="/aMvc/lib/jquery/jquery-ui.min.js"></script>
    <script src="/aMvc/lib/bootstrap/bootstrap-4.6.1-dist/js/bootstrap.bundle.min.js"></script>
    <script src="/aMvc/lib/bootstrap/bootstrap-4.6.1-dist/js/bootstrap.min.js"></script>
    <script src="/aMvc/lib/summernote-0.8.18-dist/summernote-lite.min.js"></script>

    <script src="/aMvc/lib/js/da-globallib.js?"></script>

    <script src="/aMvc/base/boardAjaxBase.js?3"></script>
    <script src="/aMvc/base/viewLibBase.js?91"></script>
    <script src="/aMvc/base/templateBase.js?"></script>

    <script type="text/javascript">

        var _dbpath = "example.dadb", _code = "da_board", _brdid, _groupid;

        function urlsplit() {
            var dec = decodeURI(location.href);
            var url = unescape(dec);
            var pm = url.split('?');
            if (pm && pm[1]) {
                var params = pm[1].split('&');
                for (var i = 0; i < params.length; i++) {
                    var param = params[i].split('=');
                    if (param && param[1]) {
                        if (param[0] == "dbpath")
                            _dbpath = param[1];
                        else if (param[0] == "code")
                            _code = param[1];
                        else if (param[0] == "brdid")
                            _brdid = param[1];
                        else if (param[0] == "groupid")
                            _groupid = param[1];
                        
                    }

                }
            }
        }

        class CafeTemplate {
            constructor(info) {
                this.info = info;
            }

            createCafeTemplate() {
                var elem = document.createElement('div');
                document.body.appendChild(elem);

                var main = new MainLayout();
                var ver = new VerticalLayout();
                var ver2 = new VerticalLayout();
                var hor = new HorizontalLayout();

                main.addControl(ver);
                main.addControl(hor);

                var topmenuconfig = {
                    type: 'set',
                    dbpath: _dbpath,
                    kcode: '_topmenu',
                    kname: 'cafe',
                    renderview: 'TopMenuView',
                    rendertype: 'table'
                }

                var c = new KeyvalueController(topmenuconfig);
                ver.addControl(c);

                var carouselconfig = {
                    type: 'set',
                    dbpath: _dbpath,
                    kcode: '_carousel',
                    kname: 'cafe',
                    renderview: 'CarouselView',
                    rendertype: 'table'
                }

                var c = new KeyvalueController(carouselconfig);
                ver.addControl(c);

                var sidemenuconfig = {
                    type: 'set',
                    dbpath: _dbpath,
                    kcode: '_sidemenu',
                    kname: 'cafe',
                    renderview: 'SideMenuView',
                    rendertype: 'table'
                }

                var c1 = new KeyvalueController(sidemenuconfig);
                //ver.addControl(c1);

                var config = {
                    type: 'boardlist',
                    dbpath: _dbpath,
                    code: _code,
                    brdid: _brdid,
                    groupid: _groupid,
                    renderview: 'BoardView',
                    rendertype: 'table'
                }
                var c2 = new BoardController(config);
                //ver.addControl(c2);

                hor.setControl([c1, 4], [c2, 8]);

                main.renderController(elem);

            }
        }

        $(document).ready(function () {
            urlsplit();

            var c = new CafeTemplate();
            c.createCafeTemplate();

        });


    </script>
</head>
<body>
    
</body>
</html>